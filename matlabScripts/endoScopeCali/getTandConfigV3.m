function [T,Config]=getTandConfigV3
% last version
L1=18;Lr=8;L2=30;Lg=19;
Cf=[
    
20	0	0	0	0
15	0	0	0	0
10	0	0	0	0
5	0	0	0	0
0	0	0	0	0
20	0	0	0	0
20	30	35	-90	90
20	40	50	90	-90
20	30	40	90	-90
20	45	55	-90	90
20	45	55	0	-180
20	30	35	0	-180
20	45	55	-180	0
20	30	40	-180	0
20	15	20	-180	0
20	45	55	-180	0
20	45	50	-180	0
20	45	60	-180	0
20	45	50	0	-180
20	45	60	0	-180
20	45	55	90	-90
20	45	60	90	-90
20	0	0	0	0
30	0	0	0	0
15	0	0	0	0

];
tem=Cf(:,3);
Cf(:,3)=Cf(:,4);
Cf(:,4)=tem;
tem=tem*0;
Cf=[tem Cf];
Cf(24,:)=[];
Cf(20,:)=[];
Cf(12,:)=[];
Cf(11,:)=[];
Cf(2,:)=[];
Cf(1,:)=[];

M=[
      -61.2577 -46.4932 96.4609    25.3543 -50.6613 106.8    -63.4648 1.82018 105.111
   -62.5967 -46.9952 101.097    23.48 -50.4157 109.834    -65.2304 1.16267 110.344
   -64.6248 -47.9911 106.757    22.2211 -51.8402 116.449    -67.8859 0.572838 117.243
   -66.983 -49.2035 112.976    20.4997 -51.9184 120.056    -67.7885 -0.0836347 119.441
   -60.1181 -45.6909 92.5078    26.0876 -49.712 102.427    -61.7468 2.39799 100.299
   -62.2075 -41.3165 96.3358    25.8462 -46.0748 102.696    -63.0164 6.38118 106.258
   -62.6876 -46.5472 103.039    23.4717 -46.5338 113.327    -62.9126 3.48023 102.56
   -63.2746 -41.4189 101.515    23.5238 -41.7096 111.879    -62.9256 8.94318 100.336
   -62.1852 -46.2993 108.79    29.8516 -47.1043 100.752    -60.9924 2.88601 112.921
   -54.8733 -45.2455 103.425    36.4589 -46.5498 96.6334    -55.2036 3.45681 110.177
    -58.7978 -45.0996 97.1452    30.0935 -47.7536 98.8071    -59.1633 3.32075 103.491
    -60.6957 -45.7205 107.571    30.9217 -47.6752 101.715    -60.748 2.88133 113.798
   -72.0011 -46.8795 105.82    18.5086 -49.535 106.078    -71.2432 2.10702 110.694
    -49.8812 -45.1327 109.794    41.815 -44.1178 92.8575    -49.4953 3.76155 115.565
  -48.9668 -46.2733 95.3293    34.8285 -51.2848 112.977    -51.7956 1.50482 103.821
    -62.2692 -48.2575 103.49    23.6281 -49.1138 115.989    -62.9573 1.47232 103.559
    -64.7954 -36.6988 106.217    21.2473 -35.3798 116.77    -64.0966 13.7391 101.603
    -61.2481 -45.1457 94.2259    25.9978 -48.3321 102.843    -60.9668 3.76439 98.8175
    -61.7156 -46.0105 97.2753    25.141 -49.3765 106.067    -63.1104 2.60256 104.52  
  
  
  ];
Tst2cb=zeros(4,4,size(M,1));
Tcb2st=zeros(4,4,size(M,1));
for i = 1:size(M,1)
    A=M(i,1:3);
    B=M(i,4:6);
    C=M(i,7:9);
    ry=(B-A)/norm(A-B);
    rx=(C-A)/norm(A-C);
    rz=cross(rx,ry)/norm(cross(rx,ry));
    ry=cross(rz,rx);
    R=[rx' ry' rz'];
    P=A';
    Tst2cb(1:3,1:3,i)=R;Tst2cb(1:3,4,i)=P;
    Tst2cb(4,4,i)=1;
    Tcb2st(:,:,i)=inv(Tst2cb(:,:,i));
end

Tcb2tc=eye(4);
rz=-(Tcb2st(1:3,4,3)-Tcb2st(1:3,4,4))/norm(Tcb2st(1:3,4,3)-Tcb2st(1:3,4,4));
ry=(Tcb2st(1:3,4,5)-Tcb2st(1:3,4,4))/norm(Tcb2st(1:3,4,5)-Tcb2st(1:3,4,4));
rx=cross(ry,rz)/norm(cross(ry,rz));
ry=cross(rz,rx);
P=Tcb2st(1:3,4,4)-rz*(L1+Lr+L2+Lg);
R=[rx ry rz];
Tcb2tc(1:3,1:3)=R;Tcb2tc(1:3,4)=P;
Ttc2cb=inv(Tcb2tc);
Ttc2st=zeros(4,4,size(M,1));
for i = 1:size(M,1)
    Ttc2st(:,:,i)=Ttc2cb*Tcb2st(:,:,i);
end
T=Ttc2st;
Cf(:,3:6)=Cf(:,3:6)*pi/180;
Config=Cf;
end