name='59_2';% fpath=['./1102/trocarCoord/',name,'.log'];fpath=['./test1206/',name,'/coord_',name,'_2.log'];M=load(fpath);% 输入顺序为：Y近端marker坐标、Y远端marker坐标、X近端marker坐标、X远端marker坐标。P=zeros(4,3);P(1,:)=mean(M([1 3 5],1:3));P(2,:)=mean(M([2 4 6],1:3));P(3,:)=mean(M([7 9 11],1:3));P(4,:)=mean(M([8 10 12],1:3));if(P(3,1)>P(4,1))    t=P(3,:);    P(3,:)=P(4,:);    P(4,:)=t;endfigure;hold on;grid on;axis equal;view([-24 -67]);plot3(P(:,1),P(:,2),P(:,3),'r*')[Tcamera_trocar,z_dev]=getSyetemTrocar(P);x_axis=Tcamera_trocar(1:3,1);y_axis=Tcamera_trocar(1:3,2);z_axis=Tcamera_trocar(1:3,3);Porigin=Tcamera_trocar(1:3,4);X=Porigin+80*x_axis;Y=Porigin+80*y_axis;Y_=Porigin-80*y_axis;Z=Porigin+80*z_axis;plotP=[Porigin';X';Y';Z';Y_'];plot3(plotP(1,1),plotP(1,2),plotP(1,3),'o');plot3(plotP([1 2],1),plotP([1 2],2),plotP([1 2],3),'r-');plot3(plotP([1 3],1),plotP([1 3],2),plotP([1 3],3),'g-');% plot3(plotP([1 5],1),plotP([1 5],2),plotP([1 5],3),'g-.');plot3(plotP([1 4],1),plotP([1 4],2),plotP([1 4],3),'b-');xlabel('X');ylabel('Y');zlabel('Z');validateVal=[norm(Tcamera_trocar(1:3,1)) norm(Tcamera_trocar(1:3,2)) norm(Tcamera_trocar(1:3,3))...    norm(Tcamera_trocar(1,1:3)) norm(Tcamera_trocar(2,1:3)) norm(Tcamera_trocar(3,1:3))];if(max(validateVal)-min(validateVal)<1e-10)    fprintf('坐标系正交\n');    fprintf("两轴间距为：%fmm\n",z_dev);else    fprintf('ERROR：：坐标系错误\n');endfname=['./test1102/trocar/Tcamera_trocar_',name];save(fname,'Tcamera_trocar');